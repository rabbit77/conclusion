### 白帽子讲web安全 读书随笔

####  写在前面的话
鉴于昨天看👀昌隆写的那篇文章，对web安全的来龙去脉不是很清楚，今天打算把吴翰清的《白帽子讲web安全》啃一遍，以下为心得及记录📝

####  
1. exploit: 黑客们使用的漏洞利用代码，被称为'exploit'.
2. 安全的基本组成元素：机密性、完整性、可用性
3. 机密性要求保护数据内容不被泄露，加密实现机密性的常用手段
4. 完整性要求数据内容是完整、没有被篡改的。常见保证手段是数字签名。
5. 可用性要求可用资源随需而得
6. 缓冲区溢出是什么❓
7. 一个业务安全设计的好的网站，往往loginID和nickname是分开的，登录ID是私有信息，只有用户本人可以看到。而nickname不能用于登录，但可以公开给所有人看。这种设计的细节，是网站积极防御的一种表现。

####  浏览器安全功能

* 同源策略
    同源策略（same origin policy）是一种约定，它是浏览器最核心也最基本的安全功能。
    浏览器的同源策略，限制了来自不同源的'document'或脚本，对当前'document'读取或设置某些功能。
    影响源的因素有：host（域名或IP地址，如果是IP地址则看成一个根域名）、子域名、端口、协议。

    在浏览器中，<script>、<img>、<iframe>、<link> 等标签都可以跨域加载资源，而不受同源策略的限制。这些带"src"属性的标签每次加载时，实际上是由浏览器发起了一次get请求。不同于XMLHttpRequest的是，通过src属性加载的资源，浏览器限制了JavaScript的权限，使其不能读写返回的内容。

####  XSS（cross site script）

* XSS攻击，是指黑客通过“HTML注入”篡改了网页，插入了恶意脚本，从而在用户浏览网页时，控制用户浏览器的一种攻击。
* XSS类型：
    * 反射型XSS ：只是简单的把用户输入的数据"反射"给浏览器。
    * 存储型XSS ：会把用户数据存储在服务器端。比如黑客写一篇博客，用户通过访问这篇文章，浏览器都会执行这段恶意代码。
    * DOM based XSS ：通过修改页面DOM 节点形成的XSS。
    * 还有一万种具体的实现方法，此处省略...

* XSS防御：
    * httponly
        浏览器将禁止JavaScript访问带有httponly属性的cookie
        一个cookie的使用过程如下：
        step1： 浏览器向服务器发起请求，这时候没有cookie
        step2： 服务器返回时发送set-cookie头，向客户端浏览器写入cookie
        step3： 在该cookie到期前，浏览器访问该域下的所有页面，都将发送该cookie
        HttpOnly 是在set-cookie时标记的
        Set-Cookie:<name>=<value>[; <Max-Age>=<age>][; expires=<date>][; domain=<damain_name>][; path=<some_path>][; secure][; HttpOnly]

####  HTML 5 安全
* web storage
    web Storage 会受同源策略的约束，记得之前有人在h5的群里想要用跨域的localstorage来着。所以不能实现。

####  服务器端应用安全
1.  注入攻击
    注入攻击的本质是把用户输入的数据当代码执行，这里的两个关键条件是：用户可以控制输入、原本程序要执行的代码拼接了用户输入的数据。vulnerabilities(漏洞)
* SQL注入

####  文件上传漏洞
1. 文件上传漏洞指上传web脚本能够被服务器解析，即通常所说的webshell
2.  十六进制的[0x00]在服务器端是字符截断的意思，例如可以构造文件名（需要修改post包）为xxx.php[\0].jpg,在服务器端最终会变为xxx.php

####  认证与回话管理
> 认证实际上是一个验证凭证的过程
    *  密码  （最常用的认证手段），密码保存必须以不可逆的加密算法或单向散列函数算法加密后存储在数据库中，将明文密码经过哈希后（比如MD5或SHA-1）再保存到数据库中是目前比较常用的做法
    * oauth

####  加密算法与随机数
1.       咳咳 有点难  看不懂了  先休息☕️
